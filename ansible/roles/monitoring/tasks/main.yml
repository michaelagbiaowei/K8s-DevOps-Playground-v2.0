---
# tasks for monitoring

- name: Initialize Terraform
  command: terraform init
  args:
    chdir: "{{remote_path}}/terraform/monitoring"
  ignore_errors: true
  register: terraform_init

- name: Generate Terraform Plan
  command: terraform plan -out=tfplan
  args:
    chdir: "{{remote_path}}/terraform/monitoring"
  ignore_errors: true
  register: terraform_plan

- name: Deploy Terraform Infrastructure
  command: terraform apply -auto-approve tfplan
  args:
    chdir: "{{remote_path}}/terraform/monitoring"
  ignore_errors: true
  register: terraform_apply
